!function(){"use strict";var e,t,n,a,r,l={3193:function(e,t){t.Z={env:"production",assets_url_prefix:"/bundles/rankymedia/",uppy_locales:["ar_SA","bg_BG","cs_CZ","da_DK","de_DE","el_GR","en_US","es_ES","fa_IR","fi_FI","fr_FR","gl_ES","he_IL","hr_HR","hu_HU","id_ID","is_IS","it_IT","ja_JP","ko_KR","nb_NO","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sr_RS_Cyrillic","sr_RS_Latin","sv_SE","th_TH","tr_TR","uk_UA","uz_UZ","vi_VN","zh_CN","zh_TW"],root_class:".ranky-media"}},9597:function(e,t,n){n.d(t,{Z:function(){return R}});var a=n(7294),r=n(7113),l=n(8062),i=n(35);var o=e=>{let{data:t,loadMore:n,hasNextPage:r,isFetchingNextPage:o}=e;const s=(0,i.QQ)().size(),{total:c}=t.pages[0].pagination;return a.createElement("div",{className:"pagination-media"},a.createElement("p",{className:"pagination-media__info"},a.createElement(l.Z,{message:"pagination_info",data:{current:s,total:c}})),a.createElement("button",{type:"button",disabled:!r||o,className:"pagination-media__button",onClick:()=>n()},a.createElement(l.Z,{message:"pagination_button_load"})))};var s=e=>{let{name:t,operator:n,data:r,defaultOption:l={value:"all",label:"Todos los tipos"}}=e;return a.createElement("div",{className:`${t.toLocaleLowerCase()}-filter`},a.createElement("select",{name:`filters[${t}][${n}]`,id:`${t.toLocaleLowerCase()}-select-filter`},a.createElement("option",{value:l.value,key:l.value},l.label),r.map((e=>a.createElement("option",{value:e.value,key:e.value},e.label)))))},c=n(1015);var u=e=>{let{name:t,placeholder:n}=e;return a.createElement("div",{className:"search-filter"},a.createElement("input",{name:`filters[${t}][${c.Z.LIKE}]`,"aria-label":n,placeholder:n,type:"search",id:"search-input-filter"}))};var d=e=>{let{name:t,value:n,checkedValue:r=!1,label:l,type:i,icon:o}=e;return a.createElement("div",{role:"radio",tabIndex:0,"aria-checked":r===n,className:`${i}-filter-item ${i}-filter-item--${n.toLocaleLowerCase()}`},a.createElement("label",{title:l,htmlFor:`${i}-filter-item--${n.toLocaleLowerCase()}`},a.createElement("input",{tabIndex:-1,"aria-label":l,type:"radio",name:t,value:n,id:`${i}-filter-item--${n.toLocaleLowerCase()}`,defaultChecked:r===n}),a.createElement("span",null,o)))},m=n(4044),p=n(358),f=n(6363),h=n(3665);var g=()=>{const e=(0,m.Z)(),t=(0,h.Dv)(f.fK),n=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-grid",viewBox:"0 0 16 16"},a.createElement("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})),r=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-list-task",viewBox:"0 0 16 16"},a.createElement("path",{fillRule:"evenodd",d:"M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z"}),a.createElement("path",{d:"M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z"}),a.createElement("path",{fillRule:"evenodd",d:"M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z"}));return a.createElement("div",{className:"view-filter"},a.createElement(d,{name:"view",value:p.w.GRID,label:e.trans("filters_view_grid"),type:"view",icon:n,checkedValue:t}),a.createElement(d,{name:"view",value:p.w.LIST,label:e.trans("filters_view_list"),type:"view",icon:r,checkedValue:t}))};var v=()=>{const e=(0,m.Z)(),t=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sort-down",viewBox:"0 0 16 16"},a.createElement("path",{d:"M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293V2.5zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"})),n=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sort-up",viewBox:"0 0 16 16"},a.createElement("path",{d:"M3.5 12.5a.5.5 0 0 1-1 0V3.707L1.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 3.707V12.5zm3.5-9a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"})),[r,l]=(0,a.useState)("DESC");return a.createElement("div",{className:"sort-filter",onChange:function(e){l(e.target.value)}},a.createElement(d,{checkedValue:r,name:"sort[direction]",value:"DESC",label:e.trans("filters_sort_desc"),type:"sort",icon:t}),a.createElement(d,{checkedValue:r,name:"sort[direction]",value:"ASC",label:e.trans("filters_sort_asc"),type:"sort",icon:n}))},y=n(5382),_=n(9297),E=n(8767);var b=()=>{const e=(0,_.Z)(),{data:t,error:n,isLoading:a}=(0,E.useQuery)("filters",(()=>(0,y._)(e.filters())));return{data:t,error:n,isLoading:a}},w=n(2202);var S=()=>{const e=(0,m.Z)(),t=(0,a.useRef)(null),{data:n,error:l,isLoading:o}=b(),d=(0,i.w7)(),y=(0,h.b9)(f._),[_,E]=(0,h.KO)(f.fK),S=(0,a.useRef)(null),[k,x]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{k&&S.current&&S.current.clientWidth<990&&(S.current.querySelector(".view-filter")&&(S.current.querySelector(".view-filter").style.margin="auto"),S.current.querySelector(".sort-filter")&&(S.current.querySelector(".sort-filter").style.margin="auto"))}),[k]),o)return a.createElement(r.Z,null);if(l)return a.createElement(w.Z,{error:l});return a.createElement("div",{className:"ranky-media__filters",ref:e=>{S.current=e,x(!!e)}},a.createElement("form",{role:"search",action:"",name:"media-filter",id:"media-form-filter",method:"GET",autoComplete:"off",onChange:e=>(e=>{y(!0);const n="search"===e.target.type?500:0;if(t.current&&clearTimeout(t.current),"view"===e.target.name)return E(e.target.value),void y(!1);t.current=setTimeout((async()=>{d.mutate(),y(!1)}),n)})(e)},a.createElement(s,{data:n.mimeTypes,name:"mime",operator:c.Z.STARTS,defaultOption:{value:"all",label:e.trans("filters_mime_type")}}),a.createElement(s,{data:n.users,name:"createdBy",operator:c.Z.EQUALS,defaultOption:{value:"all",label:e.trans("filters_user")}}),a.createElement(s,{data:n.availableDates,name:"createdAt",operator:c.Z.EQUALS,defaultOption:{value:"all",label:e.trans("filters_date")}}),a.createElement(u,{name:"name",placeholder:e.trans("filters_search")}),_!==p.w.SELECTABLE?a.createElement(g,null):null,a.createElement(v,null)))},k=n(3193);var x=e=>{let{onClick:t}=e;const n=(0,m.Z)(),r=(0,a.useRef)();return(0,a.useEffect)((()=>{const e=document.querySelector(k.Z.root_class);e.addEventListener("scroll",(()=>{r.current&&(r.current.style.bottom=20-e.scrollTop+"px")}))}),[]),a.createElement("div",{ref:r,className:"ranky-media__upload-floating-button"},a.createElement("button",{type:"button",title:n.trans("open_upload_dashboard"),"aria-label":n.trans("open_upload_dashboard"),onClick:t},a.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"46",height:"46",viewBox:"0 0 32 32"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),a.createElement("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"})))))},Z=n(4221),T=n(8314),C=n(114),N=n(4973),$=n(7635),L=n(3944);var P=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,await document.head.appendChild(n)},I=n(1202);var A=e=>{let{showUppyModal:t,setShowUppyModal:n}=e;const r=(0,I.Z)(),l=(0,_.Z)(),i=(0,E.useQueryClient)(),o=(0,Z.vo)((()=>{const e=new T.ZP({autoProceed:!1,allowMultipleUploadBatches:!0,debug:"development"===k.Z.env,restrictions:{maxFileSize:r.maxFileSize||7340032,allowedFileTypes:r.mimeTypes.length?r.mimeTypes:null},onBeforeFileAdded:()=>(t||n(!0),!0)});return e.use(C.Z,{id:"XHRUpload",endpoint:l.upload(),timeout:9e4,headers:{"X-Requested-With":"XMLHttpRequest"}}),e.on("file-added",(t=>{e.setFileMeta(t.id,{size:t.size})})),e.on("restriction-failed",((e,t)=>(0,N.sD)(new $.Z(`<b>${e.name}</b>: ${t}`)))),e.on("upload-error",((e,t,n)=>{const a=void 0!==n.body.title?$.Z.fromApiProblem(n.body):new $.Z(t,n.status);return(0,N.sD)(a)})),e.on("upload-success",(async(e,t)=>{await i.invalidateQueries("filters"),await i.invalidateQueries(["media","list"])})),e}));return(0,a.useEffect)((()=>{if(o.getPlugin("DropTarget"))return;o.use(L.Z,{id:"DropTarget",target:k.Z.root_class,onDragOver:()=>{var e;null===(e=document.querySelector(".dropzone-drag-zone"))||void 0===e||e.setAttribute("style","visibility:visible;opacity:1")},onDrop:()=>{var e;null===(e=document.querySelector(".dropzone-drag-zone"))||void 0===e||e.removeAttribute("style")},onDragLeave:e=>{var t;e.target.classList.contains("dropzone-drag-zone")&&(null===(t=document.querySelector(".dropzone-drag-zone"))||void 0===t||t.removeAttribute("style"))}}),window.uppy=o;const{locale:e}=r;let t=e;if(t.indexOf("_")<0){const e=new RegExp(`${t.toLocaleLowerCase()}_`,"g");t=k.Z.uppy_locales.find((t=>t.match(e)))}t||(t="en_US",console.error(`There are no translations for the locale ${e}. The en_US default translation pack has been loaded.`)),void 0===window.Uppy&&(window.Uppy={locales:{}}),void 0===window.Uppy.locales[t]?async function(){const e=`${k.Z.assets_url_prefix}uppy/locales/`;await P(`${e}${t}.min.js`,(()=>{window.uppy.setOptions({locale:window.Uppy.locales[t]})}))}():window.uppy.setOptions({locale:window.Uppy.locales[t]})}),[o,r]),a.createElement(Z.j6,{uppy:o,closeModalOnClickOutside:!0,disableInformer:!1,proudlyDisplayPoweredByUppy:!1,open:t,onRequestClose:()=>n(!1)})};var z=()=>{const[e,t]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(x,{onClick:()=>t(!0)}),a.createElement("div",{className:"dropzone-drag-zone"},a.createElement("p",null,a.createElement("span",null,a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",className:"bi bi-folder-plus",viewBox:"0 0 16 16"},a.createElement("path",{d:"m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"}),a.createElement("path",{d:"M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"}))),a.createElement(l.Z,{message:"dropzone"}))),a.createElement(A,{showUppyModal:e,setShowUppyModal:t}))};const M=a.lazy((()=>n.e(922).then(n.bind(n,7028))));var R=()=>{const[e,t]=(0,a.useState)(!1),{data:n,fetchNextPage:l,hasNextPage:s,isFetchingNextPage:c,isLoading:u}=(0,i.ZP)(),d=(0,E.useIsMutating)(),m=(0,i.QQ)(),g=(0,h.b9)(f.W5),v=(0,h.Dv)(f._),y=(0,h.Dv)(f.fK),_=p.m[y];if(u)return a.createElement(r.Z,null);return a.createElement(a.Fragment,null,a.createElement(z,null),a.createElement(S,null),d||v?a.createElement(r.Z,{style:{opacity:.9,top:"78px"}}):null,a.createElement("div",{className:"ranky-media__items"},a.createElement(_,{pages:null==n?void 0:n.pages,openModalFile:e=>function(e){const n=m.find(e);g(n),t(!0)}(e)}),a.createElement(o,{data:n,loadMore:l,hasNextPage:s,isFetchingNextPage:c})),a.createElement(a.Suspense,{fallback:""},e?a.createElement(M,{onClose:()=>t(!1)}):null))}},8924:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(7294),r=n(9597),l=n(3193),i=n(6363),o=n(35);var s=n(7635),c=n(4973),u=n(1202),d=n(4044),m=n(3665);var p=e=>{let{onCloseModal:t,onInsertSelection:n}=e;const[p,f]=(0,m.KO)(i.kH),[h,g]=(0,m.KO)(i.S0),v=(0,o.QQ)(),y=(0,a.useRef)(null),_=(0,u.Z)(),E=(0,d.Z)(),b=(0,o.w7)(),w=(0,a.useRef)(null);let S=E.trans("selection_mode.zero_element");function k(){"function"==typeof t?t():y.current.remove(),setTimeout((()=>{b.mutate()}),100)}function x(){f([])}function Z(e){const t=p.map((e=>v.find(e)));let a;if(_.targetRef)a=_.targetRef;else{const t=function(e){let t=e;for(;t;)if(t=t.parentElement,Object.keys(t).some((e=>e.includes("_reactRootContainer"))))return t;return null}(e.target);if(!t){const e=new s.Z("Root element not found in the hierarchy component tree",404);return void(0,c.sD)(e)}a=t}"function"==typeof n&&n(t,a);const r=new CustomEvent("ranky-media:selected-media",{detail:{medias:t}});a.dispatchEvent(r),x(),k()}return p.length>1?S=E.trans("selection_mode.multiple_elements",{length:p.length}):1===p.length&&(S=E.trans("selection_mode.one_element")),(0,a.useEffect)((()=>{!0===h&&(w.current&&w.current.click(),g(!1))}),[h,g]),a.createElement("div",{className:"ranky-media-modal ranky-media-modal--show",ref:y},a.createElement("div",{className:"ranky-media-modal__dialog",role:"document"},a.createElement("div",{className:"ranky-media-modal__dialog__title"},a.createElement("h2",null,_.title||"Media File Manager")),a.createElement("button",{onClick:k,title:E.trans("modal_close"),type:"button",className:"ranky-media-modal__btn-media-close js-close-modal","aria-label":E.trans("modal_close")},a.createElement("span",{"aria-hidden":"true"},"×")),a.createElement("div",{className:"ranky-media-modal__content"},a.createElement("div",{className:l.Z.root_class.slice(1)},a.createElement(r.Z,null))),a.createElement("div",{className:"ranky-media-modal__dialog__footer"},a.createElement("div",{className:"ranky-media-modal__dialog__footer__info"},a.createElement("p",null,a.createElement("b",null,S)),a.createElement("p",null,a.createElement("button",{type:"button",onClick:x},E.trans("selection_mode.clean")))),a.createElement("div",{className:"ranky-media-modal__dialog__footer__actions"},a.createElement("p",null,a.createElement("button",{ref:w,className:"ranky-media-modal__insert-action",type:"button",onClick:e=>Z(e)},E.trans("selection_mode.insert")))))),a.createElement("div",{className:"ranky-media-modal__backdrop"}))}},5633:function(e,t,n){n.d(t,{Z:function(){return s}});var a=async e=>{if(!e)return null;if(!(e instanceof FormData))return JSON.stringify(e);const t={};return e.forEach(((e,n)=>{t[n]=e})),JSON.stringify(t)},r=n(7635);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;l(this,"payload",void 0),l(this,"queryString",void 0),this.payload=e,this.queryString=t,null!==t&&"object"==typeof t&&(n=t,"{}"!==JSON.stringify(n))&&(this.queryString=new URLSearchParams(t))}async fetcher(e){let t=null;const n={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",credentials:"same-origin",headers:new Headers({...i.headers,...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}})};this.payload&&(n.body=await a(this.payload));let l=e;this.queryString instanceof URLSearchParams&&(l+=l.indexOf("?")>=0?"&":"?",l+=this.queryString.toString());const o=await fetch(l,n),s=await o.json();if(!o.ok)if(null!=s&&s.title)t=r.Z.fromApiProblem(s);else{const n=`Error ${o.status}: ${o.statusText} when fetch ${e}`;t=new r.Z(n),t.data=s,t.status=o.status}return{data:s,error:t}}}l(i,"headers",{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"});var o=n(940);class s extends i{async get(e){const t=o.Z.getInstance().get(e);return this.fetcher(t,"GET")}async filter(e){const t=o.Z.getInstance().filter(e);return this.fetcher(t,"GET")}async all(){const e=o.Z.getInstance().all();return this.fetcher(e,"GET")}async delete(e){const t=o.Z.getInstance().delete(e);return this.fetcher(t,"DELETE")}async post(){const e=o.Z.getInstance().upload();return this.fetcher(e,"POST")}async put(e){const t=o.Z.getInstance().update(e);return this.fetcher(t,"PUT")}async bulkDelete(e){const t=await Promise.all(e.map((e=>this.delete(e))));return{data:t.reduce(((e,t)=>Object.assign(e,t.data)),{}),error:t.filter((e=>e.error)).map((e=>e.error))[0]||null}}static create(){return new s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}}},7635:function(e,t,n){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}});class r extends Error{constructor(e,t,n){super(e,n),a(this,"status",void 0),a(this,"stack",void 0),a(this,"type",null),a(this,"data",null),a(this,"details",[]),a(this,"causes",[]),this.status=t||400,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,r)}hasCauses(){return this.causes.length>0}causesToHtml(){return`<ul>${this.causes.map((e=>`<li>${e.name}: ${e.reason}</li>`)).join("")}</ul>`}static fromApiProblem(e){const t=new r(e.title);return t.status=e.status,t.type=null==e?void 0:e.type,t.details=(null==e?void 0:e.details)||[],t.causes=(null==e?void 0:e.causes)||[],t}}},940:function(e,t,n){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}});class r{constructor(){a(this,"_apiPrefix","")}static getInstance(){return r.instance||(r.instance=new r),r.instance}static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new r;return t._apiPrefix=e,r.instance=t,r.instance}get apiPrefix(){return this._apiPrefix}all(){return`${this._apiPrefix}/ranky/media`}filter(e){return`${this._apiPrefix}/ranky/media${e}`}filters(){return`${this._apiPrefix}/ranky/media/filters`}upload(){return`${this._apiPrefix}/ranky/media`}get(e){return`${this._apiPrefix}/ranky/media/${e}`}config(){return`${this._apiPrefix}/ranky/media/config`}delete(e){return`${this._apiPrefix}/ranky/media/${e}`}update(e){return`${this._apiPrefix}/ranky/media/${e}`}}a(r,"instance",void 0)},7278:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(){n(this,"_translations",void 0)}static getInstance(){return a.instance||(a.instance=new a),a.instance}get translations(){return this._translations}trans(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object.prototype.hasOwnProperty.call(this._translations,e))return e;let n=this._translations[e];return t&&Object.keys(t).forEach((e=>{n=n.replace(`{${e}}`,t[e])})),n}static fromApi(e){const t=new a;return t._translations=e.translations,a.instance=t,a.instance}}n(a,"instance",void 0),t.Z=a},9297:function(e,t,n){var a=n(7294),r=n(4130);t.Z=()=>(0,a.useContext)(r.Z).router},1202:function(e,t,n){var a=n(7294),r=n(4130);t.Z=()=>(0,a.useContext)(r.Z).settings},4044:function(e,t,n){var a=n(7294),r=n(4130);t.Z=()=>(0,a.useContext)(r.Z).translator},35:function(e,t,n){n.d(t,{QQ:function(){return o},w7:function(){return s}});var a=n(5382),r=n(8767),l=n(9297),i=n(4973);const o=()=>{const e=(0,r.useQueryClient)();function t(){return e.getQueryData(["media","list"])}return{get:t,size:function(){return t().pages.map((e=>e.result.length)).reduce(((e,t)=>e+t))},add:function(t){return e.setQueryData(["media","list"],(e=>({...e,pages:e.pages.map(((e,n)=>{if(0===n){const n=e.result.slice();return n.unshift(t),{result:n,pagination:e.pagination}}return e}))})))},all:function(){return t().pages.map((e=>e.result)).flat()},update:function(t){return e.setQueryData(["media","list"],(e=>({...e,pages:e.pages.map((e=>({result:e.result.map((e=>e.id===t.id?t:e)),pagination:e.pagination})))})))},find:function(e){const n=t();return null==n?void 0:n.pages.reduce(((t,n)=>n.result.find((t=>t.id===e))||t),{})},findIndex:function(e){const n=t();let a={page:0,index:0};return null==n||n.pages.forEach(((t,n)=>{const r=t.result.findIndex((t=>t.id===e));r>-1&&(a={page:n,index:r})})),a},reset:function(t){return e.setQueryData(["media","list"],{pages:[t],pageParams:[]})},remove:function(t){return e.setQueryData(["media","list"],(e=>({...e,pages:e.pages.map((e=>({result:e.result.filter((e=>e.id!==t.id)),pagination:e.pagination})))})))}}},s=()=>{const e=o(),t=(0,l.Z)();return(0,r.useMutation)(["media","list"],(()=>(0,a.E)(`${t.all()}`)),{onSuccess:t=>{e.reset(t)},onError:e=>(0,i.sD)(e)})};t.ZP=()=>{const e=(0,l.Z)(),{isLoading:t,data:n,error:i,fetchNextPage:o,hasNextPage:s,isFetchingNextPage:c}=(0,r.useInfiniteQuery)(["media","list"],(t=>{let{pageParam:n=1}=t;return(0,a.E)(e.all(),n||1)}),{getNextPageParam:e=>{const t=e.pagination.page;return t<e.pagination.pages?t+1:null}});return{data:n,error:i,fetchNextPage:o,hasNextPage:s,isFetchingNextPage:c,isLoading:t}}},2425:function(e,t,n){var a=n(1202);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Z)();return t?e:`${n.assetsPrefixUrl}${e}`}},2202:function(e,t,n){var a=n(7294),r=n(3193);t.Z=e=>{let{error:t}=e;return a.createElement("div",{className:`${r.Z.root_class.slice(1)}__error`},a.createElement("h2",null,"❌ Error ",(null==t?void 0:t.status)||""),a.createElement("p",null,t.message),(null==t?void 0:t.hasCauses())&&`\n          <ul>\n            ${t.causes.map((e=>`<li>${e.name}: ${e.reason}</li>`))}\n        </ul>\n      `,(null==t?void 0:t.stack)&&a.createElement("pre",null,a.createElement("code",null,t.stack)))}},7113:function(e,t,n){var a=n(7294);t.Z=function(e){let{style:t={}}=e;return a.createElement("div",{id:"page-loader",className:"show",style:t})}},8062:function(e,t,n){var a=n(7294),r=n(4044);t.Z=e=>{let{message:t,data:n=null}=e;const l=(0,r.Z)().trans(t,n);return/<[a-z][\s\S]*>/i.test(l)?a.createElement("span",{dangerouslySetInnerHTML:{__html:l}}):l}},1945:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(7294),r=n(2425);var l=e=>{let{media:t}=e;return a.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.Z)("images/placeholder/application.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})};var i=e=>{let{media:t}=e;return a.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.Z)("images/placeholder/text.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})};var o=e=>{let{media:t}=e;return a.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.Z)("images/placeholder/audio.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})},s=n(1202);const c={application:l,audio:o,image:e=>{let{media:t}=e;const n=(0,s.Z)();if(Object.keys(n.placeholderImageTypes).includes(t.file.mimeSubType))return a.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.Z)(n.placeholderImageTypes[t.file.mimeSubType]),"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`});if(!n.supportedImageTypes.includes(t.file.mimeSubType))return a.createElement("img",{loading:"lazy","aria-hidden":"true",className:"ranky-img-placeholder ranky-img-placeholder--list",src:(0,r.Z)("images/placeholder/image.jpg"),"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`});const l=(null==t?void 0:t.thumbnails.reduce(((e,t)=>null===e?t:e.dimension.width<t.dimension.width?e:t),null))??t;return a.createElement("img",{loading:"lazy","aria-hidden":"true","data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,src:"url"in l?l.url:t.file.url,width:l.dimension.width,height:l.dimension.height,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})},video:e=>{let{media:t}=e;return a.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.Z)("images/placeholder/video.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})},text:i};var u=e=>{let{media:t}=e;const n=`${t.file.mimeType}_${t.file.mimeSubType}`,r=t.file.mimeType,l=c[n]||c[r]||c.application;return a.createElement(l,{media:t})}},4130:function(e,t,n){n.d(t,{i:function(){return y},Z:function(){return _}});var a=n(7294),r=n(7113),l=n(2202);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){i(this,"_title",null),i(this,"_targetRef",null),i(this,"_selectionMode",!1),i(this,"_multipleSelection",!1),i(this,"_apiPrefix",void 0),i(this,"_assetsPrefixUrl","/bundles/rankymedia/"),i(this,"_mimeTypes",void 0),i(this,"_supportedImageTypes",void 0),i(this,"_placeholderImageTypes",void 0),i(this,"_maxFileSize",void 0),i(this,"_paginationLimit",void 0),i(this,"_locale","en"),i(this,"_uploadUrl",void 0)}static getInstance(){return o.instance||(o.instance=new o),o.instance}get targetRef(){return this._targetRef}static set targetRef(e){o.getInstance()._targetRef=e}get title(){return this._title}static set title(e){o.getInstance()._title=e}get isSelectionMode(){return this._selectionMode}static set selectionMode(e){o.getInstance()._selectionMode=e}get isMultipleSelection(){return this._multipleSelection}static set multipleSelection(e){o.getInstance()._multipleSelection=e}static set apiPrefix(e){o.getInstance()._apiPrefix=e}get apiPrefix(){return this._apiPrefix}get locale(){return this._locale}get supportedImageTypes(){return this._supportedImageTypes}get placeholderImageTypes(){return this._placeholderImageTypes}get paginationLimit(){return this._paginationLimit}get uploadUrl(){return this._uploadUrl}get assetsPrefixUrl(){return this._assetsPrefixUrl}get maxFileSize(){return this._maxFileSize}get mimeTypes(){return this._mimeTypes}static fromApi(e){var t,n,a,r;const l=new o;return l._maxFileSize=(null===(t=e.config)||void 0===t?void 0:t.max_file_size)||null,l._mimeTypes=(null===(n=e.config)||void 0===n?void 0:n.mime_types)||[],l._uploadUrl=e.config.upload_url,l._locale=e.config.locale,l._supportedImageTypes=(null===(a=e.config)||void 0===a?void 0:a.supported_image_types)||[],l._placeholderImageTypes=(null===(r=e.config)||void 0===r?void 0:r.placeholder_image_types)||{},l._paginationLimit=e.config.pagination_limit,o.instance=l,o.instance}}i(o,"instance",void 0);var s=o,c=n(940),u=n(5382),d=n(8767),m=n(7278),p=n(7635),f=n(358),h=n(6363),g=n(3665);const v=a.createContext({}),y=e=>{let{children:t,apiPrefix:n,selectionMode:i=!1,multipleSelection:o=!1,title:y=null,targetRef:_=null}=e,E=null;const b=c.Z.create(n||""),{data:w,error:S,isLoading:k}=(0,d.useQuery)("config",(()=>(0,u._)(b.config())));if(k)return a.createElement(r.Z,null);if(S){if(!(S instanceof p.Z)){console.error(S);const e=new p.Z(S,400);return a.createElement(l.Z,{error:e})}return a.createElement(l.Z,{error:S})}return s.fromApi(w),s.apiPrefix=n||"",s.selectionMode=i,s.multipleSelection=o,s.title=y,s.targetRef=_,E={settings:s.getInstance(),translator:m.Z.fromApi(w),router:b},a.createElement(g.zt,{initialValues:[[h.fK,i?f.w.SELECTABLE:f.w.GRID]]},a.createElement(v.Provider,{value:E},t))};var _=v},5382:function(e,t,n){n.d(t,{E:function(){return l},_:function(){return r}});var a=n(7635);const r=async e=>{const t=await fetch(e,{headers:new Headers({"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"})});if(!t.ok){throw((e,t,n)=>{if(null==e||!e.title){const r=`Error ${t.status}: ${t.statusText} when fetch ${n}`,l=new a.Z(r,t.status);return l.data=e,l}return a.Z.fromApiProblem(e)})(await t.json(),t,e)}return t.json()},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=encodeURI(`?page[number]=${t}`);const a=document.getElementById("media-form-filter");return a&&(n+=`&${new URLSearchParams(new FormData(a)).toString()}`),r(`${e}${decodeURI(n)}`)}},4973:function(e,t,n){n.d(t,{Cq:function(){return i},sD:function(){return o},vl:function(){return s}});var a=n(6455),r=n.n(a),l=n(7278);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=l.Z.getInstance();return r().fire({title:e||t.trans("swal.successfully"),icon:"success",confirmButtonColor:"#6f9c40",timer:1500})}function o(e){const t=e.hasCauses()?e.message:`Error ${e.status}`,n=e.hasCauses()?e.causesToHtml():e.message;return r().fire({title:t,html:n,icon:"error",confirmButtonColor:"#DD6B55"})}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=l.Z.getInstance();return r().fire({title:n||a.trans("swal.confirm_delete"),text:a.trans("swal.delete_text"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:a.trans("swal.confirm_button"),cancelButtonText:a.trans("swal.cancel_button")}).then((async n=>n.value?e():null!==t?t():{}))}},2458:function(e,t,n){var a=n(7294),r=n(3935),l=n(2425),i=n(4044),o=n(1202),s=n(1945),c=n(5633),u=n(4973),d=n(7113),m=n(1015);var p=e=>{const[t,n]=(0,a.useState)([]),r=(0,o.Z)();return{onInsertSelection:(0,a.useCallback)(((t,a)=>{if(t.length<=0)return;const l=a.parentElement.querySelector(`input#${e}`);!1===r.isMultipleSelection?l.value=t[0].id||"":l.value=JSON.stringify(t.map((e=>e.id)))||JSON.stringify([]),n(t)}),[e,r]),selectedMedia:t,setSelectedMedia:n}};const f=a.lazy((()=>Promise.resolve().then(n.bind(n,8924))));var h=e=>{let{predefinedData:t=null,fieldId:n}=e;const r=(0,a.useRef)(),[h,g]=(0,a.useState)(!1),v=(0,i.Z)(),y=(0,o.Z)(),[_,E]=(0,a.useState)(!1),b=(0,a.useCallback)((()=>g(!1)),[]),{selectedMedia:w,setSelectedMedia:S,onInsertSelection:k}=p(n);if((0,a.useLayoutEffect)((()=>{t&&(async()=>{let e;E(!0);let n=t;if(y.isMultipleSelection){let a;try{a=JSON.parse(t)}catch(e){a=[]}if(0===a.length)return E(!1),null;n=`?page[disable]=1&filters[id][${m.Z.INCLUDES}]=${a.join(",")}`,e=e=>c.Z.create().filter(e)}else e=e=>c.Z.create().get(e);const{data:a,error:r}=await e(n);r?(console.log(r),E(!1),(0,u.sD)(r)):(S("result"in a?a.result:[a]),E(!1))})()}),[t,E,S,y]),_)return a.createElement(d.Z,null);function x(){g(!0)}return a.createElement(a.Fragment,null,a.createElement("div",{ref:r,className:"ranky-media-form-type__content__preview"},0===w.length?a.createElement("div",{tabIndex:0,role:"button",onClick:x,onKeyDown:x},a.createElement("img",{src:(0,l.Z)("images/choose-image.png"),alt:"Default image. Select a media file"})):w.map((e=>a.createElement("div",{key:`wrapper-selected-${n}-${e.id}`,tabIndex:0,role:"button",onClick:x,onKeyDown:x},a.createElement(s.Z,{media:e}))))),a.createElement("div",{className:"ranky-media-form-type__content__wrapper_button"},a.createElement("button",{className:"clean-selected-media-files",type:"button",title:v.trans("form_type.clean_selection_button"),onClick:function(){S([]),r.current.parentElement.parentElement.querySelector(`input#${n}`).value=""}},v.trans("form_type.clean_selection_button")),a.createElement("button",{type:"button",title:v.trans("form_type.open_selection_button"),onClick:x},v.trans("form_type.open_selection_button"))),a.createElement(a.Suspense,{fallback:""},h?a.createElement(f,{onInsertSelection:k,onCloseModal:b}):null))},g=n(3193),v=n(9597);var y=n(8767),_=n(4130);const E=new y.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:12e4}}});var b=e=>{let{children:t,apiPrefix:n,selectionMode:r,multipleSelection:l,title:i,targetRef:o}=e;return a.createElement(y.QueryClientProvider,{client:E},a.createElement(_.i,{title:i,apiPrefix:n,selectionMode:r,multipleSelection:l,targetRef:o},a.createElement(a.StrictMode,null,t)))},w=n(8924);console.log("appConfig",g.Z);const S=()=>{document.querySelectorAll(".ranky-media-form-type__content").forEach((e=>{var t;const n="true"===e.getAttribute("data-multiple-selection")||"1"===e.getAttribute("data-multiple-selection"),l=e.getAttribute("data-field-id");r.render(a.createElement(b,{selectionMode:!0,title:e.getAttribute("data-title")||"",multipleSelection:n,apiPrefix:e.getAttribute("data-api-prefix")||"",targetRef:e},a.createElement(h,{fieldId:l,predefinedData:(null===(t=e.parentElement.querySelector(`input#${l}`))||void 0===t?void 0:t.value)||null})),e)}))};var k,x,Z,T;new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{e instanceof HTMLElement&&e.querySelector(".ranky-media-form-type__content")&&S()}))}))})).observe(document.body,{childList:!0,subtree:!0}),S(),k=document,x=".ranky-media-open-modal",Z="click",T=e=>{(e=>{const t=e.target;e.preventDefault();const n="true"===t.getAttribute("data-multiple-selection")||"1"===t.getAttribute("data-multiple-selection"),l=document.createElement("div");l.classList.add("wrapper-ranky-media-modal"),document.body.appendChild(l),r.render(a.createElement(b,{selectionMode:!0,title:t.getAttribute("data-title")||"",multipleSelection:n,apiPrefix:t.getAttribute("data-api-prefix")||"",targetRef:t},a.createElement(w.default,{onCloseModal:()=>{l.remove()}})),l)})(e)},k.addEventListener(Z,(e=>{e.target.matches(x)&&T(e)})),document.querySelector(g.Z.root_class)&&r.render(a.createElement(b,{apiPrefix:document.querySelector(g.Z.root_class).getAttribute("data-api-prefix")||""},a.createElement(v.Z,null)),document.querySelector(g.Z.root_class))},6363:function(e,t,n){n.d(t,{S0:function(){return r},W5:function(){return l},_:function(){return i},fK:function(){return o},kH:function(){return s}});var a=n(3665);const r=(0,a.cn)(!1),l=(0,a.cn)(null),i=(0,a.cn)(!1),o=(0,a.cn)("GRID"),s=(0,a.cn)([])},1015:function(e,t){var n;!function(e){e.EQUALS="eq",e.NOT_EQUALS="neq",e.GREATER_THAN="gt",e.GREATER_THAN_OR_EQUAL="gte",e.LESS_THAN="lt",e.LESS_THAN_OR_EQUAL="lte",e.LIKE="like",e.NOT_LIKE="nlike",e.EXACT="exact",e.NOT_EXACT="nexact",e.STARTS="starts",e.ENDS="ends",e.INCLUDES="in",e.NOT_INCLUDES="nin"}(n||(n={})),t.Z=n},358:function(e,t,n){n.d(t,{w:function(){return v},m:function(){return y}});var a=n(7294),r=n(1945),l=n(6363),i=n(1202),o=n(35),s=n(3665);var c=e=>{let{pages:t,openModalFile:n}=e;const[c,u]=(0,s.KO)(l.kH),[d,m]=(0,s.KO)(l.S0),[p,f]=a.useState(null),h=(0,i.Z)(),g=(0,o.QQ)();return a.createElement("ul",{tabIndex:-1,className:"file-list file-list--mode-grid file-list--mode-selectable"},t&&t.map((e=>e.result.map((e=>a.createElement("li",{key:`li-${e.id}`,"data-id":e.id,onDoubleClick:t=>{return n=e.id,c.includes(n)||u((e=>[...e,n])),f(n),void m(!0);var n}},a.createElement("div",{className:`file-item mime-type-${e.file.mimeType} mime-subtype-${e.file.mimeSubType}`,"aria-label":e.description.alt,role:"checkbox","aria-checked":c.includes(e.id),tabIndex:0},a.createElement("input",{tabIndex:-1,type:"checkbox",name:"media[]",id:`ck-media-${e.id}`,checked:c.includes(e.id),onChange:t=>function(e,t){if(!1!==h.isMultipleSelection){if("shiftKey"in e.nativeEvent&&!0===e.nativeEvent.shiftKey){if(null===p)return void f(t);const e=g.all().map((e=>e.id)),n=e.indexOf(t),a=e.indexOf(p),r=e.slice(Math.min(n,a),Math.max(n,a)+1);return u(r),void f(t)}c.includes(t)?u((e=>e.filter((e=>e!==t)))):u((e=>[...e,t])),f(t)}else u([t])}(t,e.id)}),a.createElement("label",{htmlFor:`ck-media-${e.id}`},a.createElement(r.Z,{media:e})),a.createElement("button",{onClick:()=>n(e.id),type:"button"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil",viewBox:"0 0 16 16"},a.createElement("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}))))))))))};var u=e=>{let{pages:t,openModalFile:n}=e;return a.createElement("ul",{className:"file-list file-list--mode-grid",tabIndex:-1,role:"group"},t&&t.map((e=>e.result.map((e=>a.createElement("li",{key:e.id,"data-id":e.id},a.createElement("div",{className:`file-item mime-type-${e.file.mimeType} mime-subtype-${e.file.mimeSubType}`,role:"button","aria-label":e.description.alt,tabIndex:0,onClick:()=>n(e.id),onKeyDown:()=>n(e.id)},a.createElement(r.Z,{media:e}))))))))},d=n(4973),m=n(4044),p=n(8767),f=n(5633),h=n(7635);var g=e=>{let{pages:t,openModalFile:n}=e;const[i,c]=(0,a.useState)(!1),[u,g]=(0,a.useState)([]),v=(0,s.b9)(l._),y=(0,m.Z)(),_=(0,p.useQueryClient)(),E=(0,o.QQ)();return a.createElement("div",{className:"file-list file-list--mode-list"},a.createElement("div",{className:"batch-actions"},a.createElement("select",{name:"media-batch-actions",id:"media-batch-actions",onChange:async e=>{let{target:t}=e;if(""===t.value)return{};if(0===u.length)return t.selectedIndex=0,(0,d.sD)(new h.Z(y.trans("bulk_actions_error_no_select")));const n=async()=>{v(!0);const e=await f.Z.create().bulkDelete(u);return e.error?(0,d.sD)(e.error):(await _.invalidateQueries(["media","list"]),await _.invalidateQueries("filters"),t.selectedIndex=0,c(!1),g([]),v(!1),(0,d.Cq)())};return"delete"===t.value?(0,d.vl)(n,(function(){t.selectedIndex=0}),y.trans("bulk_actions_delete_prompt",{value:u.length})):(0,d.sD)(new h.Z(y.trans("bulk_actions_error_no_action",{value:(null==t?void 0:t.value)||"undefined"})))}},a.createElement("option",{value:""},y.trans("bulk_actions_title")),a.createElement("option",{value:"delete"},y.trans("bulk_actions_delete")))),a.createElement("div",{className:"table-responsive"},a.createElement("table",{className:"table-view-list"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement("input",{type:"checkbox",id:"ck-media-all",onChange:()=>{u.length>0?(c(!1),g([])):(c(!0),g(E.all().map((e=>e.id))))},checked:i})),a.createElement("th",null,y.trans("file")),a.createElement("th",null,y.trans("type")),a.createElement("th",null,y.trans("date")),a.createElement("th",null,y.trans("breakpoints")))),a.createElement("tbody",null,t&&t.map((e=>e.result.map((e=>{var t;return a.createElement("tr",{key:e.id},a.createElement("td",null,a.createElement("input",{type:"checkbox",name:"media[]",id:`ck-media-${e.id}`,onChange:()=>(e=>{if(u.includes(e))g(u.filter((t=>t!==e))),c(!1);else{const t=[...u,e];g(t),c(t.length===E.all().length)}})(e.id),checked:u.includes(e.id)})),a.createElement("td",null,a.createElement("div",{tabIndex:0,onClick:()=>n(e.id),onKeyDown:()=>n(e.id),role:"button"},a.createElement("span",{className:"file-preview"},a.createElement(r.Z,{media:e})),a.createElement("span",{className:"file-name"},e.file.name))),a.createElement("td",null,e.file.mime," ",null!=e&&null!==(t=e.dimension)&&void 0!==t&&t.label?`(${e.dimension.label})`:null),a.createElement("td",null,e.createdAt," ",y.trans("by")," ",e.createdBy),a.createElement("td",null,e.thumbnails.length>0?a.createElement("ul",null,e.thumbnails.map((e=>a.createElement("li",{key:e.name+e.breakpoint},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.url},a.createElement("b",null,e.breakpoint,":")," ",e.dimension.label," ",a.createElement("b",null,"size:")," ",e.humanSize))))):"-"))}))))))))};const v={SELECTABLE:"SELECTABLE",LIST:"LIST",GRID:"GRID"},y={[v.SELECTABLE]:c,[v.GRID]:u,[v.LIST]:g}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return l[e].call(n.exports,n,n.exports,o),n.exports}o.m=l,e=[],o.O=function(t,n,a,r){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],r=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&r||l>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[s])}))?n.splice(s--,1):(i=!1,r<l&&(l=r));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return"rank_media.modal_file.js?v="+o.h().slice(0,8)},o.miniCssF=function(e){return"rank_media.modal_file.css?v="+o.h().slice(0,8)},o.h=function(){return"bfc693fd7c7bdf3e674c"},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},n="ranky-media-bundle:",o.l=function(e,a,r,l){if(t[e])t[e].push(a);else{var i,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+r){i=d;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",n+r),i.src=e),t[e]=[a];var m=function(n,a){i.onerror=i.onload=null,clearTimeout(p);var r=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(a)})),n)return n(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=361,o.p="/bundles/rankymedia/",a=function(e){return new Promise((function(t,n){var a=o.miniCssF(e),r=o.p+a;if(function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var r=(i=n[a]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===e||r===t))return i}var l=document.getElementsByTagName("style");for(a=0;a<l.length;a++){var i;if((r=(i=l[a]).getAttribute("data-href"))===e||r===t)return i}}(a,r))return t();!function(e,t,n,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=function(l){if(r.onerror=r.onload=null,"load"===l.type)n();else{var i=l&&("load"===l.type?"missing":l.type),o=l&&l.target&&l.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=o,r.parentNode.removeChild(r),a(s)}},r.href=t,document.head.appendChild(r)}(e,r,t,n)}))},r={361:0},o.f.miniCss=function(e,t){r[e]?t.push(r[e]):0!==r[e]&&{922:1}[e]&&t.push(r[e]=a(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))},function(){var e={361:0};o.f.j=function(t,n){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise((function(n,r){a=e[t]=[n,r]}));n.push(a[2]=r);var l=o.p+o.u(t),i=new Error;o.l(l,(function(n){if(o.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",i.name="ChunkLoadError",i.type=r,i.request=l,a[1](i)}}),"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,l=n[0],i=n[1],s=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(s)var u=s(o)}for(t&&t(n);c<l.length;c++)r=l[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=self.webpackChunkranky_media_bundle=self.webpackChunkranky_media_bundle||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var s=o.O(void 0,[161,902],(function(){return o(2458)}));s=o.O(s)}();